


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > AbstractActionLanguage</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">languages</a>
</div>

<h1>Coverage Summary for Class: AbstractActionLanguage (languages)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">AbstractActionLanguage</td>
<td class="coverageStat">
  <span class="percent">
    45.5%
  </span>
  <span class="absValue">
    (5/11)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    76.7%
  </span>
  <span class="absValue">
    (33/43)
  </span>
</td>
</tr>
  <tr>
    <td class="name">AbstractActionLanguage$Action</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$ActionInvocationException</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$DeleteAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$DeleteAction$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$EditLiteralAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$EditLiteralAction$</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$IdentityAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$IdentityAction$</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$InvalidDeleteTargetException</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$InvalidEditTargetException</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$InvalidPasteTargetException</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$InvalidSelectTargetException</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$PasteAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (17/17)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$PasteAction$</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$SelectExprAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (10/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$SelectExprAction$</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$SelectTypeAction</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (6/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (10/10)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">AbstractActionLanguage$SelectTypeAction$</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    80%
  </span>
  <span class="absValue">
    (44/55)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    87.1%
  </span>
  <span class="absValue">
    (101/116)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package languages
&nbsp;
<b class="fc">&nbsp;trait AbstractActionLanguage extends AbstractNodeLanguage {</b>
<b class="fc">&nbsp;  private def getActionClass(actionName: String): Class[Action] = (actionName match {</b>
<b class="fc">&nbsp;    case &quot;SelectExprAction&quot;  =&gt; classOf[SelectExprAction]</b>
<b class="fc">&nbsp;    case &quot;SelectTypeAction&quot;  =&gt; classOf[SelectTypeAction]</b>
<b class="fc">&nbsp;    case &quot;EditLiteralAction&quot; =&gt; classOf[EditLiteralAction]</b>
<b class="fc">&nbsp;    case &quot;DeleteAction&quot;      =&gt; classOf[DeleteAction]</b>
<b class="fc">&nbsp;    case &quot;PasteAction&quot;       =&gt; classOf[PasteAction]</b>
<b class="fc">&nbsp;    case &quot;IdentityAction&quot;    =&gt; classOf[IdentityAction]</b>
<b class="fc">&nbsp;    case _                   =&gt; throw new ActionInvocationException(s&quot;Unknown action name: $actionName&quot;)</b>
&nbsp;  }).asInstanceOf[Class[Action]]
&nbsp;
&nbsp;  def createAction(
&nbsp;    actionName: String,
&nbsp;    nodeString: String,
&nbsp;    treePathString: String,
&nbsp;    extraArgs: List[String],
<b class="fc">&nbsp;    modeName: String = &quot;edit&quot;</b>
&nbsp;  ): Action = {
<b class="fc">&nbsp;    val node = Node.read(nodeString) match {</b>
<b class="fc">&nbsp;      case Some(n: OuterNode) =&gt; n</b>
<b class="nc">&nbsp;      case Some(n)            =&gt; throw new ActionInvocationException(s&quot;Expected OuterNode, got $n&quot;)</b>
<b class="fc">&nbsp;      case _                  =&gt; throw new NodeStringParseException(nodeString)</b>
&nbsp;    }
<b class="fc">&nbsp;    val treePath = Node.readPathString(treePathString)</b>
<b class="fc">&nbsp;    val actionClass = getActionClass(actionName)</b>
<b class="fc">&nbsp;    val constructor = actionClass.getConstructors.headOption match {</b>
<b class="fc">&nbsp;      case Some(c) =&gt; c</b>
<b class="nc">&nbsp;      case None    =&gt; throw new ActionInvocationException(s&quot;No constructor found for $actionClass&quot;)</b>
&nbsp;    }
<b class="fc">&nbsp;    var remainingExtraArgs = extraArgs</b>
<b class="fc">&nbsp;    val arguments = constructor.getParameterTypes.map {</b>
<b class="fc">&nbsp;      case c if classOf[AbstractActionLanguage] isAssignableFrom c =&gt; this</b>
<b class="fc">&nbsp;      case c if classOf[Node] isAssignableFrom c                   =&gt; node</b>
<b class="fc">&nbsp;      case c if classOf[List[Int]] isAssignableFrom c              =&gt; treePath</b>
<b class="fc">&nbsp;      case c if classOf[String] isAssignableFrom c =&gt;</b>
<b class="fc">&nbsp;        if (remainingExtraArgs.isEmpty) {</b>
<b class="fc">&nbsp;          throw new ActionInvocationException(s&quot;Missing parameter for $actionClass&quot;)</b>
&nbsp;        }
<b class="fc">&nbsp;        val arg = remainingExtraArgs.head</b>
<b class="fc">&nbsp;        remainingExtraArgs = remainingExtraArgs.tail</b>
<b class="fc">&nbsp;        arg</b>
<b class="nc">&nbsp;      case c =&gt; throw new ActionInvocationException(s&quot;Unexpected parameter type in createAction: $c&quot;)</b>
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;    if (remainingExtraArgs.nonEmpty) {</b>
<b class="fc">&nbsp;      throw new ActionInvocationException(s&quot;Too many parameters for $actionClass&quot;)</b>
&nbsp;    }
&nbsp;    try {
<b class="fc">&nbsp;      val result = constructor.newInstance(arguments: _*)</b>
<b class="fc">&nbsp;      result.asInstanceOf[Action]</b>
&nbsp;    } catch {
<b class="nc">&nbsp;      case e: Exception =&gt; throw new ActionInvocationException(s&quot;Error invoking constructor for $actionClass: $e&quot;)</b>
&nbsp;    }
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  abstract class Action(val originalTree: OuterNode, val treePath: List[Int]) {</b>
<b class="fc">&nbsp;    lazy val newTree: OuterNode</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class SelectExprAction(</b>
<b class="fc">&nbsp;    override val originalTree: OuterNode,</b>
<b class="fc">&nbsp;    override val treePath: List[Int],</b>
<b class="pc">&nbsp;    exprChoiceName: String</b>
<b class="fc">&nbsp;  ) extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree.findChild(treePath) match {</b>
<b class="fc">&nbsp;      case Some(exprChoiceNode: ExprChoiceNode) =&gt;</b>
<b class="fc">&nbsp;        originalTree.replace(treePath, VariableNode.createFromExprName(exprChoiceName))</b>
<b class="fc">&nbsp;      case other =&gt; throw new InvalidSelectTargetException(other)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class SelectTypeAction(</b>
<b class="fc">&nbsp;    override val originalTree: OuterNode,</b>
<b class="fc">&nbsp;    override val treePath: List[Int],</b>
<b class="pc">&nbsp;    typeChoiceName: String</b>
<b class="fc">&nbsp;  ) extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree.findChild(treePath) match {</b>
<b class="fc">&nbsp;      case Some(typeChoiceNode: TypeChoiceNode) =&gt;</b>
<b class="fc">&nbsp;        originalTree.replace(treePath, TypeNode.fromTypeName(typeChoiceName))</b>
<b class="fc">&nbsp;      case other =&gt; throw new InvalidSelectTargetException(other)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class EditLiteralAction(</b>
<b class="fc">&nbsp;    override val originalTree: OuterNode,</b>
<b class="fc">&nbsp;    override val treePath: List[Int],</b>
<b class="pc">&nbsp;    newLiteralText: String</b>
<b class="fc">&nbsp;  ) extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree.findChild(treePath) match {</b>
<b class="fc">&nbsp;      case Some(literalNode: LiteralNode) =&gt; originalTree.replace(treePath, LiteralNode(newLiteralText))</b>
<b class="fc">&nbsp;      case other                          =&gt; throw new InvalidEditTargetException(other)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class DeleteAction(override val originalTree: OuterNode, override val treePath: List[Int])</b>
<b class="fc">&nbsp;      extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree.findChild(treePath) match {</b>
<b class="fc">&nbsp;      case Some(_: ExprNode)       =&gt; originalTree.replace(treePath, ExprChoiceNode())</b>
<b class="fc">&nbsp;      case Some(_: TypeNodeParent) =&gt; originalTree.replace(treePath, TypeChoiceNode())</b>
<b class="fc">&nbsp;      case other                   =&gt; throw new InvalidDeleteTargetException(other)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class PasteAction(</b>
<b class="fc">&nbsp;    override val originalTree: OuterNode,</b>
<b class="fc">&nbsp;    override val treePath: List[Int],</b>
<b class="pc">&nbsp;    pasteNodeString: String</b>
<b class="fc">&nbsp;  ) extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    private val pasteNode: Node = Node.read(pasteNodeString).get</b>
&nbsp;
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree.findChild(treePath) match {</b>
<b class="fc">&nbsp;      case Some(_: ExprNode) =&gt;</b>
<b class="fc">&nbsp;        pasteNode match {</b>
<b class="fc">&nbsp;          case _: ExprNode =&gt; originalTree.replace(treePath, pasteNode)</b>
<b class="fc">&nbsp;          case _           =&gt; throw new InvalidPasteTargetException(Some(pasteNode))</b>
&nbsp;        }
<b class="fc">&nbsp;      case Some(_: TypeNodeParent) =&gt;</b>
<b class="fc">&nbsp;        pasteNode match {</b>
<b class="fc">&nbsp;          case _: TypeNodeParent =&gt; originalTree.replace(treePath, pasteNode)</b>
<b class="fc">&nbsp;          case _                 =&gt; throw new InvalidPasteTargetException(Some(pasteNode))</b>
&nbsp;        }
<b class="fc">&nbsp;      case other =&gt; throw new InvalidPasteTargetException(other)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="pc">&nbsp;  case class IdentityAction(override val originalTree: OuterNode, override val treePath: List[Int])</b>
<b class="fc">&nbsp;      extends Action(originalTree, treePath) {</b>
<b class="fc">&nbsp;    override lazy val newTree: OuterNode = originalTree</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  class ActionInvocationException(message: String) extends Exception(message)</b>
&nbsp;
<b class="fc">&nbsp;  class InvalidSelectTargetException(found: Option[Node]) extends Exception(s&quot;Invalid select target: $found&quot;)</b>
&nbsp;
<b class="fc">&nbsp;  class InvalidEditTargetException(found: Option[Node]) extends Exception(s&quot;Invalid literal edit target: $found&quot;)</b>
&nbsp;
<b class="fc">&nbsp;  class InvalidDeleteTargetException(found: Option[Node]) extends Exception(s&quot;Invalid delete target: $found&quot;)</b>
&nbsp;
<b class="fc">&nbsp;  class InvalidPasteTargetException(found: Option[Node]) extends Exception(s&quot;Invalid paste target: $found&quot;)</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-01-18 19:37</div>
</div>
</body>
</html>
