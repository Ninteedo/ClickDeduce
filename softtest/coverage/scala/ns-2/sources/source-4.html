


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > LArith</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">languages</a>
</div>

<h1>Coverage Summary for Class: LArith (languages)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">LArith</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (23/23)
  </span>
</td>
</tr>
  <tr>
    <td class="name">LArith$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$IntType</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$IntType$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Num</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (8/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Num$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (4/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$NumV</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$NumV$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Plus</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (12/12)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Plus$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Times</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (3/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (12/12)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$Times$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$UnexpectedArgType</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$UnexpectedArgType$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$UnexpectedArgValue</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">LArith$UnexpectedArgValue$</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (30/30)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (72/72)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package languages
&nbsp;
<b class="fc">&nbsp;class LArith extends ClickDeduceLanguage {</b>
&nbsp;  // expressions
&nbsp;
&nbsp;  /** A numeric expression. Can be any integer.
&nbsp;    *
&nbsp;    * @param x
&nbsp;    *   The integer value of the number.
&nbsp;    */
<b class="fc">&nbsp;  case class Num(x: Literal) extends Expr {</b>
<b class="fc">&nbsp;    override def evalInner(env: Env): Value = x match {</b>
<b class="fc">&nbsp;      case LiteralInt(x) =&gt; NumV(x)</b>
<b class="fc">&nbsp;      case _             =&gt; UnexpectedArgValue(s&quot;Num can only accept LiteralInt, not $x&quot;)</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override def typeCheckInner(tEnv: TypeEnv): Type = x match {</b>
<b class="fc">&nbsp;      case LiteralInt(_) =&gt; IntType()</b>
<b class="fc">&nbsp;      case _             =&gt; UnexpectedArgType(s&quot;Num can only accept LiteralInt, not $x&quot;)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  object Num {</b>
<b class="fc">&nbsp;    def apply(x: BigInt): Num = new Num(LiteralInt(x))</b>
&nbsp;
<b class="fc">&nbsp;    def apply(x: Int): Num = new Num(LiteralInt(BigInt(x)))</b>
&nbsp;  }
&nbsp;
&nbsp;  /** A plus expression. Both subexpressions must evaluate to `NumV`.
&nbsp;    *
&nbsp;    * @param e1
&nbsp;    *   The first expression to add.
&nbsp;    * @param e2
&nbsp;    *   The second expression to add.
&nbsp;    */
<b class="fc">&nbsp;  case class Plus(e1: Expr, e2: Expr) extends Expr {</b>
<b class="fc">&nbsp;    override def evalInner(env: Env): Value = (e1.eval(env), e2.eval(env)) match {</b>
<b class="fc">&nbsp;      case (NumV(x), NumV(y))    =&gt; NumV(x + y)</b>
<b class="fc">&nbsp;      case (v1, _) if v1.isError =&gt; v1</b>
<b class="fc">&nbsp;      case (_, v2) if v2.isError =&gt; v2</b>
<b class="fc">&nbsp;      case (v1, v2)              =&gt; UnexpectedArgValue(s&quot;Plus cannot accept ($v1, $v2)&quot;)</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override def typeCheckInner(tEnv: TypeEnv): Type = (e1.typeCheck(tEnv), e2.typeCheck(tEnv)) match {</b>
<b class="fc">&nbsp;      case (IntType(), IntType()) =&gt; IntType()</b>
<b class="fc">&nbsp;      case (t1, _) if t1.isError  =&gt; t1</b>
<b class="fc">&nbsp;      case (_, t2) if t2.isError  =&gt; t2</b>
<b class="fc">&nbsp;      case (t1, t2)               =&gt; UnexpectedArgType(s&quot;Plus cannot accept ($t1, $t2)&quot;)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
&nbsp;  /** A times expression. Both subexpressions must evaluate to `NumV`.
&nbsp;    *
&nbsp;    * @param e1
&nbsp;    *   The first expression to multiply.
&nbsp;    * @param e2
&nbsp;    *   The second expression to multiply.
&nbsp;    */
<b class="fc">&nbsp;  case class Times(e1: Expr, e2: Expr) extends Expr {</b>
<b class="fc">&nbsp;    override def evalInner(env: Env): Value = (e1.eval(env), e2.eval(env)) match {</b>
<b class="fc">&nbsp;      case (NumV(x), NumV(y))    =&gt; NumV(x * y)</b>
<b class="fc">&nbsp;      case (v1, _) if v1.isError =&gt; v1</b>
<b class="fc">&nbsp;      case (_, v2) if v2.isError =&gt; v2</b>
<b class="fc">&nbsp;      case (v1, v2)              =&gt; UnexpectedArgValue(s&quot;Times cannot accept ($v1, $v2)&quot;)</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    override def typeCheckInner(tEnv: TypeEnv): Type = (e1.typeCheck(tEnv), e2.typeCheck(tEnv)) match {</b>
<b class="fc">&nbsp;      case (IntType(), IntType()) =&gt; IntType()</b>
<b class="fc">&nbsp;      case (t1, _) if t1.isError  =&gt; t1</b>
<b class="fc">&nbsp;      case (_, t2) if t2.isError  =&gt; t2</b>
<b class="fc">&nbsp;      case (t1, t2)               =&gt; UnexpectedArgType(s&quot;Times cannot accept ($t1, $t2)&quot;)</b>
<b class="fc">&nbsp;    }</b>
&nbsp;  }
&nbsp;
&nbsp;  // values
&nbsp;
&nbsp;  /** A numeric value. Can be any integer.
&nbsp;    *
&nbsp;    * @param x
&nbsp;    *   The integer value of the number.
&nbsp;    */
<b class="fc">&nbsp;  case class NumV(x: BigInt) extends Value {</b>
<b class="fc">&nbsp;    override val typ: Type = IntType()</b>
&nbsp;  }
&nbsp;
&nbsp;  /** An error that occurs due to an incorrect argument type.
&nbsp;    *
&nbsp;    * @param message
&nbsp;    *   The error message.
&nbsp;    */
<b class="fc">&nbsp;  case class UnexpectedArgValue(override val message: String) extends EvalError {</b>
<b class="fc">&nbsp;    override val typ: Type = UnexpectedArgType(message)</b>
&nbsp;  }
&nbsp;
&nbsp;  // types
&nbsp;
&nbsp;  /** Type for integers.
&nbsp;    */
<b class="fc">&nbsp;  case class IntType() extends Type</b>
&nbsp;
&nbsp;  /** An error that occurs due to an incorrect argument type.
&nbsp;    *
&nbsp;    * @param message
&nbsp;    *   The error message.
&nbsp;    */
<b class="fc">&nbsp;  case class UnexpectedArgType(override val message: String) extends TypeError</b>
&nbsp;
<b class="fc">&nbsp;  override def prettyPrint(e: Expr): String = e match {</b>
<b class="fc">&nbsp;    case Num(x)        =&gt; x.toString</b>
<b class="fc">&nbsp;    case Plus(e1, e2)  =&gt; s&quot;(${prettyPrint(e1)} + ${prettyPrint(e2)})&quot;</b>
<b class="fc">&nbsp;    case Times(e1, e2) =&gt; s&quot;(${prettyPrint(e1)} × ${prettyPrint(e2)})&quot;</b>
<b class="fc">&nbsp;    case e             =&gt; super.prettyPrint(e)</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  override def prettyPrint(v: Value): String = v match {</b>
<b class="fc">&nbsp;    case NumV(x) =&gt; x.toString</b>
<b class="fc">&nbsp;    case v       =&gt; super.prettyPrint(v)</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  override def prettyPrint(t: Type): String = t match {</b>
<b class="fc">&nbsp;    case IntType() =&gt; &quot;Int&quot;</b>
<b class="fc">&nbsp;    case t         =&gt; super.prettyPrint(t)</b>
&nbsp;  }
&nbsp;
<b class="fc">&nbsp;  override def calculateExprClassList: List[Class[Expr]] = List(classOf[Num], classOf[Plus], classOf[Times])</b>
<b class="fc">&nbsp;    .map(_.asInstanceOf[Class[Expr]])</b>
&nbsp;
<b class="fc">&nbsp;  override def calculateTypeClassList: List[Class[Type]] = super.calculateTypeClassList ++ List(classOf[IntType])</b>
<b class="fc">&nbsp;    .map(_.asInstanceOf[Class[Type]])</b>
&nbsp;}
&nbsp;
<b class="fc">&nbsp;object LArith extends LArith {}</b>
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-01-18 19:37</div>
</div>
</body>
</html>
