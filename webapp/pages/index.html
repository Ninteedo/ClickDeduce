<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
  <title>ClickDeduce</title>
</head>

<body onload="initialise()">

<h2>ClickDeduce</h2>

<div id="lang-selector-div">
</div>

<div id="mode-selector-div">
  <form>
    <input type="radio" id="edit-mode-radio" name="mode" value="edit" checked="checked">
    <label for="edit-mode-radio">Edit</label>
    <input type="radio" id="type-check-mode-radio" name="mode" value="type-check">
    <label for="type-check-mode-radio">Type-Check</label>
    <input type="radio" id="eval-mode-radio" name="mode" value="eval">
    <label for="eval-mode-radio">Evaluate</label>
  </form>
</div>

<form onsubmit="handleSubmit(event, '/start-node-blank')">
  <input type="hidden" id="nodeUserInput" value="">
  <input type="submit" id="start-node-button" value="Start Node Blank">
</form>
<br>
<button onclick="undo()" id="undoButton">Undo</button>
<button onclick="redo()" id="redoButton">Redo</button>

<button onclick="saveTree()" id="saveButton">Save</button>
<button onclick="loadTree()" id="loadButton">Load</button>

<br>
<input type="checkbox" id="value-highlighting-toggle"/><label for="value-highlighting-toggle">Value Highlighting</label>

<div id="tree-container">
  <div id="tree-buttons">
    <button onclick="zoomToFit()">
      <img src="../images/zoom_to_fit.svg" alt="Zoom to Fit">
    </button>
  </div>
  <div id="tree"></div>
</div>

<div id="custom-context-menu" class="custom-menu">
  <ul>
    <li id="delete-button" onclick="clearTreeNode(event)">Delete</li>
    <li id="copy-button" onclick="copyTreeNode()">Copy</li>
    <li id="paste-button" onclick="pasteTreeNode()">Paste</li>
    <li id="zoom-button" onclick="zoomToFit()">Zoom to Fit</li>
  </ul>
</div>

<div id="error-message" class="error-message fade-out"></div>

<script>
  (function() {
    function showErrorMessage() {
      document.body.innerHTML = `
        <h1>Failed to load ClickDeduce</h1>
        <p>ClickDeduce failed to load.
        This is likely because the server is not running, or it was not possible to connect to it.</p>
      `;
    }

    const scriptTag = document.createElement('script');
    scriptTag.src = 'dist/bundle.js';
    scriptTag.addEventListener('error', showErrorMessage);

    // Append script tag into body
    document.body.appendChild(scriptTag);
  })();
</script>

</body>
</html>
